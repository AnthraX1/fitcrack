webpackJsonp([24],{457:function(t,e,a){"use strict";function s(t){a(600)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(541),i=a(602),o=a(32),r=s,c=o(n.a,i.a,!1,r,"data-v-08b23592",null);e.default=c.exports},541:function(t,e,a){"use strict";e.a={name:"JobsView",data:function(){return{interval:null,status:null,attackType:null,search:"",viewHidden:!1,totalItems:0,pagination:{},selectedJobs:[],loading:!0,headers:[{text:"Name",align:"start",value:"name"},{text:"Attack type",value:"attack",align:"end",sortable:!1},{text:"Status",value:"status",align:"end"},{text:"Progress",value:"progress",align:"end"},{text:"Added",value:"time",align:"end"},{text:"Actions",value:"actions",sortable:!1,align:"end"}],jobs_statuses:[{text:"ready",code:0},{text:"finished",code:1},{text:"exhausted",code:2},{text:"malformed",code:3},{text:"timeout",code:4},{text:"running",code:10},{text:"finishing",code:12}],jobs_types:[{text:"dictionary",code:0},{text:"mask",code:1},{text:"combinator",code:2},{text:"pcfg",code:3}],jobs:[]}},watch:{pagination:{handler:"updateList",deep:!0},"$route.name":"updateList",viewHidden:"updateList"},mounted:function(){this.interval=setInterval(function(){this.loadJobs()}.bind(this),15e3)},beforeDestroy:function(){clearInterval(this.interval)},methods:{loadJobs:function(){var t=this;this.axios.get(this.$serverAddr+"/job",{params:{page:this.pagination.page,per_page:this.pagination.itemsPerPage,order_by:this.pagination.sortBy[0],descending:this.pagination.sortDesc[0],name:this.search,status:this.status,attack_mode:this.attackType,showDeleted:this.viewHidden}}).then(function(e){t.jobs=e.data.items,t.totalItems=e.data.total,t.loading=!1})},updateList:function(){this.loading=!0,this.loadJobs()},updateStatus:function(t){this.status=t,this.$refs.table.updatePagination({page:1,totalItems:this.totalItems})},progressToPercentage:function(t){return t>100&&(t=100),t.toFixed()+"%"},operateJob:function(t,e){var a=this;this.axios.get(this.$serverAddr+"/job/"+t+"/action",{params:{operation:e}}).then(function(t){console.log(t.data),a.loadJobs()})},hideJob:function(t){var e=this;this.loading=!0,this.axios.delete(this.$serverAddr+"/job/"+t).then(function(t){e.loadJobs()})}}}},600:function(t,e,a){var s=a(601);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(455)("476abd24",s,!0,{})},601:function(t,e,a){e=t.exports=a(454)(!0),e.push([t.i,".cont[data-v-08b23592]{height:100%}.actionsBtns[data-v-08b23592]{text-align:right}.middle[data-v-08b23592]{vertical-align:middle}","",{version:3,sources:["/home/runner/work/fitcrack/fitcrack/webadmin/fitcrackFE/src/components/job/jobsView.vue"],names:[],mappings:"AACA,uBACE,WAAa,CACd,AACD,8BACI,gBAAkB,CACrB,AACD,yBACI,qBAAuB,CAC1B",file:"jobsView.vue",sourcesContent:["\n.cont[data-v-08b23592] {\n  height: 100%;\n}\n.actionsBtns[data-v-08b23592]{\n    text-align: right;\n}\n.middle[data-v-08b23592] {\n    vertical-align: middle;\n}\n\n"],sourceRoot:""}])},602:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{flat:""}},[a("v-chip",[t._v(t._s(t.totalItems))]),t._v(" "),a("h2",{staticClass:"ml-4"},[t._v("\n      All jobs\n      "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.viewHidden,expression:"viewHidden"}]},[t._v("(hidden)")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.status||t.attackType,expression:"status || attackType"}]},[t._v("that")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}]},[t._v("are "+t._s(t.status))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.status&&t.attackType,expression:"status && attackType"}]},[t._v("and")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.attackType,expression:"attackType"}]},[t._v("use "+t._s(t.attackType)+" attack")])])],1),t._v(" "),a("v-text-field",{staticClass:"px-2 pt-3",attrs:{clearable:"",outlined:"","prepend-inner-icon":"mdi-table-search",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("div",{staticClass:"d-flex justify-space-between align-center px-4 pt-2"},[a("v-switch",{staticClass:"mr-4",attrs:{label:"View hidden jobs","prepend-icon":t.viewHidden?"mdi-eye-off":"mdi-eye"},model:{value:t.viewHidden,callback:function(e){t.viewHidden=e},expression:"viewHidden"}}),t._v(" "),a("v-select",{staticClass:"mr-4",attrs:{items:t.jobs_statuses,label:"Status","single-line":"","item-text":"text","item-value":"text","prepend-icon":"mdi-timelapse",clearable:""},on:{change:t.updateList},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),t._v(" "),a("v-select",{attrs:{items:t.jobs_types,label:"Attack type","single-line":"","item-text":"text","item-value":"text","prepend-icon":"mdi-crosshairs-gps",clearable:""},on:{change:t.updateList},model:{value:t.attackType,callback:function(e){t.attackType=e},expression:"attackType"}})],1),t._v(" "),a("v-data-table",{ref:"table",attrs:{headers:t.headers,items:t.jobs,search:t.search,options:t.pagination,"server-items-length":t.totalItems,loading:t.loading,"footer-props":{itemsPerPageOptions:[25,10,50,100],itemsPerPageText:"Jobs per page"},"show-select":"","fixed-header":""},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var s=e.item;return[a("router-link",{staticClass:"middle",attrs:{to:{name:"jobDetail",params:{id:s.id}}}},[t._v("\n        "+t._s(s.name)+"\n      ")])]}},{key:"item.status",fn:function(e){var s=e.item;return[s.host_count>0?a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("span",t._g({class:s.status_type+"--text"},n),[t._v("\n            "+t._s(s.status_text)+"\n          ")])]}}],null,!0)},[t._v(" "),a("span",[t._v(t._s(s.status_tooltip))])]):a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("span",t._g({staticClass:"warning--text"},n),[0==s.host_count?a("v-icon",{attrs:{left:"",color:"warning"}},[t._v("\n              mdi-alert\n            ")]):t._e(),t._v("\n            no hosts\n          ")],1)]}}],null,!0)},[t._v(" "),a("span",[t._v("No hosts, open job detail and assign them!")])])]}},{key:"item.progress",fn:function(e){var s=e.item;return[a("div",{staticClass:"d-flex align-center justify-end"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.progressToPercentage(s.progress)))]),t._v(" "),a("v-progress-circular",{staticClass:"jobProgress",attrs:{size:"18",width:3,rotate:270,color:"primary",value:s.progress}})],1)]}},{key:"item.time",fn:function(e){var a=e.item;return[t._v("\n      "+t._s(t.$moment(a.time).format("D.M.YYYY H:mm:ss"))+"\n    ")]}},{key:"item.actions",fn:function(e){var s=e.item;return[a("div",{staticClass:"actionsBtns"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"mx-0",attrs:{icon:"",disabled:"0"!==s.status||0==s.host_count},on:{click:function(e){return t.operateJob(s.id,"start")}}},n),[a("v-icon",{attrs:{color:"success"}},[t._v("\n                mdi-play-circle\n              ")])],1)]}}],null,!0)},[t._v(" "),a("span",[t._v("Start job")])]),t._v(" "),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"mx-0",attrs:{icon:"",disabled:"10"!==s.status},on:{click:function(e){return t.operateJob(s.id,"stop")}}},n),[a("v-icon",{attrs:{color:"error"}},[t._v("\n                mdi-pause-circle\n              ")])],1)]}}],null,!0)},[t._v(" "),a("span",[t._v("Stop job")])]),t._v(" "),a("v-menu",{scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mx-0",attrs:{icon:""}},s),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),a("v-list",[s.status<10?a("v-list-item",{on:{click:function(e){return t.operateJob(s.id,"restart")}}},[a("v-list-item-title",[a("v-icon",{attrs:{left:""}},[t._v("\n                  mdi-restart\n                ")]),t._v("Restart\n              ")],1)],1):t._e(),t._v(" "),a("v-list-item",{on:{click:function(e){return t.hideJob(s.id)}}},[a("v-list-item-title",[a("v-icon",{attrs:{left:""}},[t._v("\n                  "+t._s(s.deleted?"mdi-eye":"mdi-eye-off")+"\n                ")]),t._v(" \n                "+t._s(s.deleted?"Stop hiding":"Hide")+"\n              ")],1)],1)],1)],1)],1)]}}]),model:{value:t.selectedJobs,callback:function(e){t.selectedJobs=e},expression:"selectedJobs"}})],1)},n=[],i={render:s,staticRenderFns:n};e.a=i}});
//# sourceMappingURL=24.3e9a2619a44b6bb88d59.js.map