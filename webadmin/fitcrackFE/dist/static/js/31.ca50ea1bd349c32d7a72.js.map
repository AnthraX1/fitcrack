{"version":3,"sources":["webpack:///static/js/31.ca50ea1bd349c32d7a72.js","webpack:///./src/components/batch/batchList.vue","webpack:///src/components/batch/batchList.vue","webpack:///./src/components/batch/batchList.vue?55bc"],"names":["webpackJsonp","489","module","__webpack_exports__","__webpack_require__","normalizeComponent","Component","641","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","data","interval","search","totalItems","pagination","loading","batches","headers","mounted","this","load","setInterval","beforeDestroy","clearInterval","methods","deleteBatchConfirm","$root","$confirm","774","render","_vm","_h","$createElement","_c","_self","ref","attrs","itemsPerPageOptions","itemsPerPageText","on","$event","scopedSlots","_u","key","fn","item","staticClass","_v","_s","name","_g","class","status","text","color","icon","description","total_jobs","waiting_jobs","code","runBatch","id","interruptBatch","_e","staticRenderFns","esExports"],"mappings":"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","file":"static/js/31.ca50ea1bd349c32d7a72.js","sourcesContent":["webpackJsonp([31],{\n\n/***/ 489:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_batchList_vue__ = __webpack_require__(641);\n/* empty harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_61ae6248_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_batchList_vue__ = __webpack_require__(774);\nvar normalizeComponent = __webpack_require__(40)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_batchList_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_61ae6248_hasScoped_false_transformToRequire_video_src_poster_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_batchList_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 641:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__);\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      interval: null,\n      search: '',\n      totalItems: 0,\n      pagination: {},\n      loading: true,\n      batches: [],\n      //\n      headers: [{\n        text: 'Name',\n        align: 'start',\n        value: 'name'\n      }, { text: 'Status', value: 'status', align: 'end' }, { text: 'Length', value: 'total_jobs', align: 'end' }, { text: 'Progress', value: 'waiting_jobs', align: 'end' }, { text: 'Actions', value: 'actions', align: 'end' }]\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.load();\n    this.interval = setInterval(function () {\n      _this.load();\n    }, 5000);\n  },\n\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.interval);\n  },\n  methods: {\n    load: function load() {\n      var _this2 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n        var data;\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this2.axios.get(_this2.$serverAddr + '/batches', {\n                  params: {\n                    'page': _this2.pagination.page,\n                    'per_page': _this2.pagination.itemsPerPage\n                  }\n                }).then(function (r) {\n                  return r.data;\n                });\n\n              case 2:\n                data = _context.sent;\n\n                _this2.batches = data.items;\n                _this2.totalItems = data.total;\n                _this2.loading = false;\n\n              case 6:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this2);\n      }))();\n    },\n    runBatch: function runBatch(id) {\n      var _this3 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this3.loading = true;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return _this3.axios.post(_this3.$serverAddr + '/batches/' + id + '/run');\n\n              case 4:\n                _this3.load();\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2['catch'](1);\n\n                console.error(_context2.t0);\n\n              case 10:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, _this3, [[1, 7]]);\n      }))();\n    },\n    interruptBatch: function interruptBatch(id) {\n      var _this4 = this;\n\n      return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee3() {\n        return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this4.loading = true;\n                _context3.prev = 1;\n                _context3.next = 4;\n                return _this4.axios.post(_this4.$serverAddr + '/batches/' + id + '/interrupt');\n\n              case 4:\n                _this4.load();\n                _context3.next = 10;\n                break;\n\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3['catch'](1);\n\n                console.error(_context3.t0);\n\n              case 10:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, _this4, [[1, 7]]);\n      }))();\n    },\n    deleteBatchConfirm: function deleteBatchConfirm(id) {\n      var _this5 = this;\n\n      this.$root.$confirm('Unlink Batch', 'This will unlink jobs from this batch and remove the batch. Jobs will not be discarded. If a job is currently running, it will finish normally. Are you sure?').then(function () {\n        var _ref = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4(confirm) {\n          return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _this5.loading = true;\n                  _context4.prev = 1;\n                  _context4.next = 4;\n                  return _this5.axios.delete(_this5.$serverAddr + '/batches/' + id);\n\n                case 4:\n                  _this5.load();\n                  _context4.next = 10;\n                  break;\n\n                case 7:\n                  _context4.prev = 7;\n                  _context4.t0 = _context4['catch'](1);\n\n                  console.error(_context4.t0);\n\n                case 10:\n                case 'end':\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, _this5, [[1, 7]]);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 774:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-data-table',{ref:\"table\",attrs:{\"loading\":_vm.loading,\"headers\":_vm.headers,\"items\":_vm.batches,\"options\":_vm.pagination,\"server-items-length\":_vm.totalItems,\"footer-props\":{itemsPerPageOptions: [25,10,50,100], itemsPerPageText:'Batches per page'},\"fixed-header\":\"\",\"disable-sort\":\"\"},on:{\"update:options\":function($event){_vm.pagination=$event}},scopedSlots:_vm._u([{key:\"item.name\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('router-link',{staticClass:\"table-link\",attrs:{\"to\":(\"/batches/\" + (item.id))}},[_vm._v(\"\\n        \"+_vm._s(item.name)+\"\\n      \")])]}},{key:\"item.status\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('span',_vm._g({class:[((item.status.color) + \"--text\"), 'text-capitalize']},on),[_vm._v(\"\\n            \"+_vm._s(item.status.text)+\"\\n            \"),_c('v-icon',{attrs:{\"right\":\"\",\"color\":item.status.color}},[_vm._v(\"\\n              \"+_vm._s(item.status.icon)+\"\\n            \")])],1)]}}],null,true)},[_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.status.description))])])]}},{key:\"item.total_jobs\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('span',[_c('strong',[_vm._v(_vm._s(item.total_jobs))]),_vm._v(\" jobs\")])]}},{key:\"item.waiting_jobs\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-progress-circular',{attrs:{\"size\":\"18\",\"width\":3,\"rotate\":270,\"value\":100 / item.total_jobs * (item.total_jobs - item.waiting_jobs)}}),_vm._v(\" \"),_c('span',{staticClass:\"ml-2\"},[_c('strong',[_vm._v(_vm._s(item.waiting_jobs))]),_vm._v(\" in queue\")])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"actionsBtns\"},[(item.current_user_can_operate)?[(item.status.code < 10)?_c('v-btn',{attrs:{\"disabled\":item.status.code == 1,\"text\":\"\",\"color\":\"success\"},on:{\"click\":function($event){return _vm.runBatch(item.id)}}},[_vm._v(\"\\n            Run\\n            \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"\\n              mdi-play\\n            \")])],1):(item.status.code < 20)?_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.interruptBatch(item.id)}}},[_vm._v(\"\\n            Interrupt\\n            \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"\\n              mdi-pause\\n            \")])],1):_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.runBatch(item.id)}}},[_vm._v(\"\\n            Resume\\n            \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"\\n              mdi-skip-next\\n            \")])],1)]:_vm._e(),_vm._v(\" \"),(item.current_user_can_edit)?_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.deleteBatchConfirm(item.id)}}},[_vm._v(\"\\n          Unlink\\n          \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"\\n            mdi-link-variant-off\\n          \")])],1):_vm._e()],2)]}}])})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/31.ca50ea1bd349c32d7a72.js","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./batchList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./batchList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-61ae6248\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./batchList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/batch/batchList.vue\n// module id = 489\n// module chunks = 31","<template>\n  <div>\n    <v-data-table\n      ref=\"table\"\n      :loading=\"loading\"\n      :headers=\"headers\"\n      :items=\"batches\"\n      :options.sync=\"pagination\"\n      :server-items-length=\"totalItems\"\n      :footer-props=\"{itemsPerPageOptions: [25,10,50,100], itemsPerPageText:'Batches per page'}\"\n      fixed-header\n      disable-sort\n    >\n      <template v-slot:item.name=\"{ item }\">\n        <router-link\n          :to=\"`/batches/${item.id}`\"\n          class=\"table-link\"\n        >\n          {{ item.name }}\n        </router-link>\n      </template>\n      <template v-slot:item.status=\"{ item }\">\n        <v-tooltip top>\n          <template v-slot:activator=\"{ on }\">\n            <span\n              :class=\"[`${item.status.color}--text`, 'text-capitalize']\"\n              v-on=\"on\"\n            >\n              {{ item.status.text }}\n              <v-icon\n                right\n                :color=\"item.status.color\"\n              >\n                {{ item.status.icon }}\n              </v-icon>\n            </span>\n          </template>\n          <span>{{ item.status.description }}</span>\n        </v-tooltip>\n      </template>\n      <template v-slot:item.total_jobs=\"{ item }\">\n        <span><strong>{{ item.total_jobs }}</strong> jobs</span>\n      </template>\n      <template v-slot:item.waiting_jobs=\"{ item }\">\n        <v-progress-circular\n          size=\"18\"\n          :width=\"3\"\n          :rotate=\"270\"\n          :value=\"100 / item.total_jobs * (item.total_jobs - item.waiting_jobs)\"\n        />\n        <span class=\"ml-2\"><strong>{{ item.waiting_jobs }}</strong> in queue</span>\n      </template>\n      <template v-slot:item.actions=\"{ item }\">\n        <div class=\"actionsBtns\">\n          <!-- opration buttons -->\n          <template v-if=\"item.current_user_can_operate\">\n            <v-btn\n              v-if=\"item.status.code < 10\"\n              :disabled=\"item.status.code == 1\"\n              text\n              color=\"success\"\n              @click=\"runBatch(item.id)\"\n            >\n              Run\n              <v-icon right>\n                mdi-play\n              </v-icon>\n            </v-btn>\n            <v-btn\n              v-else-if=\"item.status.code < 20\"\n              text\n              color=\"error\"\n              @click=\"interruptBatch(item.id)\"\n            >\n              Interrupt\n              <v-icon right>\n                mdi-pause\n              </v-icon>\n            </v-btn>\n            <v-btn\n              v-else\n              text\n              color=\"error\"\n              @click=\"runBatch(item.id)\"\n            >\n              Resume\n              <v-icon right>\n                mdi-skip-next\n              </v-icon>\n            </v-btn>\n          </template>\n          <!-- delete button -->\n          <v-btn\n            v-if=\"item.current_user_can_edit\"\n            text\n            @click=\"deleteBatchConfirm(item.id)\"\n          >\n            Unlink\n            <v-icon right>\n              mdi-link-variant-off\n            </v-icon>\n          </v-btn>\n        </div>\n      </template>\n    </v-data-table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      interval: null,\n      search: '',\n      totalItems: 0,\n      pagination: {},\n      loading: true,\n      batches: [],\n      //\n      headers: [\n        {\n          text: 'Name',\n          align: 'start',\n          value: 'name'\n        },\n        {text: 'Status', value: 'status', align: 'end'},\n        {text: 'Length', value: 'total_jobs', align: 'end'},\n        {text: 'Progress', value: 'waiting_jobs', align: 'end'},\n        {text: 'Actions', value: 'actions', align: 'end'}\n      ]\n    }\n  },\n  mounted () {\n    this.load()\n    this.interval = setInterval(() => {\n      this.load()\n    }, 5000)\n  },\n  beforeDestroy: function () {\n    clearInterval(this.interval)\n  },\n  methods: {\n    async load () {\n      const data = await this.axios.get(`${this.$serverAddr}/batches`, {\n        params: {\n          'page': this.pagination.page,\n          'per_page': this.pagination.itemsPerPage\n        }\n      }).then(r => r.data)\n      this.batches = data.items\n      this.totalItems = data.total\n      this.loading = false\n    },\n    async runBatch (id) {\n      this.loading = true\n      try {\n        await this.axios.post(`${this.$serverAddr}/batches/${id}/run`)\n        this.load()\n      } catch (e) {\n        console.error(e)\n      }\n    },\n    async interruptBatch (id) {\n      this.loading = true\n      try {\n        await this.axios.post(`${this.$serverAddr}/batches/${id}/interrupt`)\n        this.load()\n      } catch (e) {\n        console.error(e)\n      }\n    },\n    deleteBatchConfirm (id) {\n      this.$root.$confirm('Unlink Batch', `This will unlink jobs from this batch and remove the batch. Jobs will not be discarded. If a job is currently running, it will finish normally. Are you sure?`)\n      .then(async confirm => {\n        this.loading = true\n        try {\n          await this.axios.delete(`${this.$serverAddr}/batches/${id}`)\n          this.load()\n        } catch (e) {\n          console.error(e)\n        }\n      })\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/batch/batchList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-data-table',{ref:\"table\",attrs:{\"loading\":_vm.loading,\"headers\":_vm.headers,\"items\":_vm.batches,\"options\":_vm.pagination,\"server-items-length\":_vm.totalItems,\"footer-props\":{itemsPerPageOptions: [25,10,50,100], itemsPerPageText:'Batches per page'},\"fixed-header\":\"\",\"disable-sort\":\"\"},on:{\"update:options\":function($event){_vm.pagination=$event}},scopedSlots:_vm._u([{key:\"item.name\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('router-link',{staticClass:\"table-link\",attrs:{\"to\":(\"/batches/\" + (item.id))}},[_vm._v(\"\\n        \"+_vm._s(item.name)+\"\\n      \")])]}},{key:\"item.status\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('span',_vm._g({class:[((item.status.color) + \"--text\"), 'text-capitalize']},on),[_vm._v(\"\\n            \"+_vm._s(item.status.text)+\"\\n            \"),_c('v-icon',{attrs:{\"right\":\"\",\"color\":item.status.color}},[_vm._v(\"\\n              \"+_vm._s(item.status.icon)+\"\\n            \")])],1)]}}],null,true)},[_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.status.description))])])]}},{key:\"item.total_jobs\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('span',[_c('strong',[_vm._v(_vm._s(item.total_jobs))]),_vm._v(\" jobs\")])]}},{key:\"item.waiting_jobs\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-progress-circular',{attrs:{\"size\":\"18\",\"width\":3,\"rotate\":270,\"value\":100 / item.total_jobs * (item.total_jobs - item.waiting_jobs)}}),_vm._v(\" \"),_c('span',{staticClass:\"ml-2\"},[_c('strong',[_vm._v(_vm._s(item.waiting_jobs))]),_vm._v(\" in queue\")])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"actionsBtns\"},[(item.current_user_can_operate)?[(item.status.code < 10)?_c('v-btn',{attrs:{\"disabled\":item.status.code == 1,\"text\":\"\",\"color\":\"success\"},on:{\"click\":function($event){return _vm.runBatch(item.id)}}},[_vm._v(\"\\n            Run\\n            \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"\\n              mdi-play\\n            \")])],1):(item.status.code < 20)?_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.interruptBatch(item.id)}}},[_vm._v(\"\\n            Interrupt\\n            \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"\\n              mdi-pause\\n            \")])],1):_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"error\"},on:{\"click\":function($event){return _vm.runBatch(item.id)}}},[_vm._v(\"\\n            Resume\\n            \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"\\n              mdi-skip-next\\n            \")])],1)]:_vm._e(),_vm._v(\" \"),(item.current_user_can_edit)?_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.deleteBatchConfirm(item.id)}}},[_vm._v(\"\\n          Unlink\\n          \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"\\n            mdi-link-variant-off\\n          \")])],1):_vm._e()],2)]}}])})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-61ae6248\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/batch/batchList.vue\n// module id = 774\n// module chunks = 31"],"sourceRoot":""}