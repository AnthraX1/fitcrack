webpackJsonp([32],{466:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(619),a=n(753),s=n(39),i=s(r.a,a.a,!1,null,null,null);e.default=i.exports},619:function(t,e,n){"use strict";var r=n(21),a=n.n(r),s=n(22),i=n.n(s);e.a={data:function(){return{interval:null,search:"",totalItems:0,pagination:{},loading:!0,batches:[],headers:[{text:"Name",align:"start",value:"name"},{text:"Status",value:"status",align:"end"},{text:"Length",value:"total_jobs",align:"end"},{text:"Progress",value:"waiting_jobs",align:"end"},{text:"Actions",value:"actions",align:"end"}]}},mounted:function(){var t=this;this.load(),this.interval=setInterval(function(){t.load()},5e3)},beforeDestroy:function(){clearInterval(this.interval)},methods:{load:function(){var t=this;return i()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get(t.$serverAddr+"/batches",{params:{page:t.pagination.page,per_page:t.pagination.itemsPerPage}}).then(function(t){return t.data});case 2:n=e.sent,t.batches=n.items,t.totalItems=n.total,t.loading=!1;case 6:case"end":return e.stop()}},e,t)}))()},runBatch:function(t){var e=this;return i()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,e.axios.post(e.$serverAddr+"/batches/"+t+"/run");case 4:e.load(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.error(n.t0);case 10:case"end":return n.stop()}},n,e,[[1,7]])}))()},interruptBatch:function(t){var e=this;return i()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,e.axios.post(e.$serverAddr+"/batches/"+t+"/interrupt");case 4:e.load(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.error(n.t0);case 10:case"end":return n.stop()}},n,e,[[1,7]])}))()},deleteBatchConfirm:function(t){var e=this;this.$root.$confirm("Unlink Batch","This will unlink jobs from this batch and remove the batch. Jobs will not be discarded. If a job is currently running, it will finish normally. Are you sure?").then(function(){var n=i()(a.a.mark(function n(r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.prev=1,n.next=4,e.axios.delete(e.$serverAddr+"/batches/"+t);case 4:e.load(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.error(n.t0);case 10:case"end":return n.stop()}},n,e,[[1,7]])}));return function(t){return n.apply(this,arguments)}}())}}}},753:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-data-table",{ref:"table",attrs:{loading:t.loading,headers:t.headers,items:t.batches,options:t.pagination,"server-items-length":t.totalItems,"footer-props":{itemsPerPageOptions:[25,10,50,100],itemsPerPageText:"Batches per page"},"fixed-header":"","disable-sort":""},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var r=e.item;return[n("router-link",{staticClass:"table-link",attrs:{to:"/batches/"+r.id}},[t._v("\n        "+t._s(r.name)+"\n      ")])]}},{key:"item.status",fn:function(e){var r=e.item;return[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("span",t._g({class:[r.status.color+"--text","text-capitalize"]},a),[t._v("\n            "+t._s(r.status.text)+"\n            "),n("v-icon",{attrs:{right:"",color:r.status.color}},[t._v("\n              "+t._s(r.status.icon)+"\n            ")])],1)]}}],null,!0)},[t._v(" "),n("span",[t._v(t._s(r.status.description))])])]}},{key:"item.total_jobs",fn:function(e){var r=e.item;return[n("span",[n("strong",[t._v(t._s(r.total_jobs))]),t._v(" jobs")])]}},{key:"item.waiting_jobs",fn:function(e){var r=e.item;return[n("v-progress-circular",{attrs:{size:"18",width:3,rotate:270,value:100/r.total_jobs*(r.total_jobs-r.waiting_jobs)}}),t._v(" "),n("span",{staticClass:"ml-2"},[n("strong",[t._v(t._s(r.waiting_jobs))]),t._v(" in queue")])]}},{key:"item.actions",fn:function(e){var r=e.item;return[n("div",{staticClass:"actionsBtns"},[r.current_user_can_operate?[r.status.code<10?n("v-btn",{attrs:{disabled:1==r.status.code,text:"",color:"success"},on:{click:function(e){return t.runBatch(r.id)}}},[t._v("\n            Run\n            "),n("v-icon",{attrs:{right:""}},[t._v("\n              mdi-play\n            ")])],1):r.status.code<20?n("v-btn",{attrs:{text:"",color:"error"},on:{click:function(e){return t.interruptBatch(r.id)}}},[t._v("\n            Interrupt\n            "),n("v-icon",{attrs:{right:""}},[t._v("\n              mdi-pause\n            ")])],1):n("v-btn",{attrs:{text:"",color:"error"},on:{click:function(e){return t.runBatch(r.id)}}},[t._v("\n            Resume\n            "),n("v-icon",{attrs:{right:""}},[t._v("\n              mdi-skip-next\n            ")])],1)]:t._e(),t._v(" "),r.current_user_can_edit?n("v-btn",{attrs:{text:""},on:{click:function(e){return t.deleteBatchConfirm(r.id)}}},[t._v("\n          Unlink\n          "),n("v-icon",{attrs:{right:""}},[t._v("\n            mdi-link-variant-off\n          ")])],1):t._e()],2)]}}])})],1)},a=[],s={render:r,staticRenderFns:a};e.a=s}});
//# sourceMappingURL=32.c74fad3bc66c12eda413.js.map