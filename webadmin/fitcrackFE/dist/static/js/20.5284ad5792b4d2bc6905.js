webpackJsonp([20],{468:function(e,t,a){"use strict";function s(e){a(716)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(560),i=a(718),r=a(32),o=s,l=r(n.a,i.a,!1,o,"data-v-2db97464",null);t.default=l.exports},560:function(e,t,a){"use strict";t.a={name:"UsersView",data:function(){var e=this;return{newRoleName:null,addingRole:!1,roleDialog:!1,newPassword:null,newUsername:null,newUserRoleID:null,newEmail:null,editingUser:!1,editDialog:!1,addingUser:!1,userDialog:!1,oldPassword:null,newPassword0:null,newpassword1:null,users:[],totalItems:0,pagination:{},loading:!0,headers:[{text:"Name",align:"left",value:"name"},{text:"Add new job",value:"ADD_NEW_JOB",align:"left"},{text:"Manage users",value:"MANAGE_USERS",align:"left"},{text:"",value:"id",align:"right"}],userRoles:[],validEditUserForm:!0,validNewUserForm:!0,emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail must be valid"}],newPasswordRules:[function(e){return!!e||"Repeat new password"},function(t){return e.newPassword0!=e.newPassword1||"match!"}]}},created:function(){this.loadUsers(),this.loadRoles()},methods:{loadUsers:function(){var e=this;this.axios.get(this.$serverAddr+"/user/").then(function(t){e.users=t.data.items})},loadRoles:function(){var e=this;this.loading=!0,this.axios.get(this.$serverAddr+"/user/role").then(function(t){e.userRoles=t.data.items,e.loading=!1})},updateUserRole:function(e,t){this.axios.post(this.$serverAddr+"/user/role",{user_id:t,role_id:e}).then(function(e){console.log(e.data),console.log("user role changed")})},roleChange:function(e,t,a){this.axios.post(this.$serverAddr+"/user/role/"+t,{key:a,value:e}).then(function(e){console.log(e.data),console.log("user role changed")})},addRole:function(){var e=this;this.addingRole=!0,this.axios.post(this.$serverAddr+"/user/role/new",{name:this.newRoleName}).then(function(t){console.log(t.data),e.loadRoles(),e.roleDialog=!1,e.newRoleName="",e.addingRole=!1})},deleteRole:function(e){var t=this;this.axios.delete(this.$serverAddr+"/user/role/"+e).then(function(e){console.log(e.data),t.loadRoles()})},addUser:function(){var e=this;this.addingUser=!0,this.axios.post(this.$serverAddr+"/user/",{username:this.newUsername,mail:this.newEmail,password:this.newPassword,role_id:this.newUserRoleID}).then(function(t){console.log(t.data),e.loadUsers(),e.userDialog=!1,e.addingUser=!1,e.newUsername="",e.newEmail="",e.newPassword="",e.newUserRoleID=""})},editUser:function(){var e=this;this.editingUser=!0,this.axios.post(this.$serverAddr+"/user/",{username:this.newUsername,mail:this.newEmail,password:this.newPassword,role_id:this.role_id}).then(function(t){console.log(t.data),e.loadUsers(),e.editDialog=!1,e.edittingUser=!1,e.newUsername="",e.newEmail="",e.newPassword="",e.newUserRoleID=""})},deleteUser:function(e){var t=this;this.axios.delete(this.$serverAddr+"/user/"+e).then(function(e){console.log(e.data),t.loadUsers()})}}}},716:function(e,t,a){var s=a(717);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(455)("374180af",s,!0,{})},717:function(e,t,a){t=e.exports=a(454)(!0),t.push([e.i,".users[data-v-2db97464]{max-width:550px}h2[data-v-2db97464]{padding-bottom:5px;text-align:center}.roleTable[data-v-2db97464]{max-width:500px;margin:auto}.width150[data-v-2db97464]{min-width:100px}.addBtnCont[data-v-2db97464]{text-align:right}.addBtn[data-v-2db97464]{display:inline-block;margin-right:0}.loadingOver[data-v-2db97464]{position:absolute;top:0;left:0;width:100%;height:100%}.loadingOver .progress[data-v-2db97464]{top:0;bottom:0;left:0;right:0;margin:auto;position:absolute}","",{version:3,sources:["/home/runner/work/fitcrack/fitcrack/webadmin/fitcrackFE/src/components/user/manageUsersView.vue"],names:[],mappings:"AACA,wBACE,eAAiB,CAClB,AACD,oBACE,mBAAoB,AACpB,iBAAmB,CACpB,AACD,4BACE,gBAAiB,AACjB,WAAa,CACd,AACD,2BACE,eAAiB,CAClB,AACD,6BACE,gBAAkB,CACnB,AACD,yBACE,qBAAsB,AACtB,cAAgB,CACjB,AACD,8BACE,kBAAmB,AACnB,MAAO,AACP,OAAQ,AACR,WAAY,AACZ,WAAa,CACd,AACD,wCACE,MAAO,AACP,SAAU,AACV,OAAQ,AACR,QAAS,AACT,YAAa,AACb,iBAAmB,CACpB",file:"manageUsersView.vue",sourcesContent:["\n.users[data-v-2db97464] {\n  max-width: 550px;\n}\nh2[data-v-2db97464] {\n  padding-bottom: 5px;\n  text-align: center;\n}\n.roleTable[data-v-2db97464] {\n  max-width: 500px;\n  margin: auto;\n}\n.width150[data-v-2db97464] {\n  min-width: 100px;\n}\n.addBtnCont[data-v-2db97464] {\n  text-align: right;\n}\n.addBtn[data-v-2db97464] {\n  display: inline-block;\n  margin-right: 0;\n}\n.loadingOver[data-v-2db97464] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.loadingOver .progress[data-v-2db97464] {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  position: absolute;\n}\n"],sourceRoot:""}])},718:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("div",{staticClass:"users mx-auto mb-5"},[a("h2",[e._v("Users")]),e._v(" "),a("v-card",[a("v-list",{attrs:{"two-line":""}},[e._l(e.users,function(t,s){return[a("v-list-item",{on:{click:function(e){}}},[a("v-list-item-content",[a("v-list-item-title",[e._v("\n                "+e._s(t.username)+"\n              ")]),e._v(" "),a("v-list-item-subtitle",[e._v(e._s(t.mail))])],1),e._v(" "),a("v-list-item-action",{staticClass:"width150"},[a("v-select",{attrs:{text:"",solo:"","item-text":"name","item-value":"id",items:e.userRoles,label:"Role",value:t.role.id},on:{change:function(a){return e.updateUserRole(a,t.id)}}})],1),e._v(" "),a("v-list-item-action",[a("div",{staticClass:"addBtnCont"},[a("v-btn",{staticClass:"addBtn",attrs:{color:"primary",text:""},on:{click:function(t){e.editDialog=!0}}},[e._v("\n                  Edit\n                ")])],1)]),e._v(" "),a("v-list-item-action",[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on;return[a("v-btn",e._g({staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){return e.deleteUser(t.id)}}},n),[a("v-icon",{attrs:{color:"error"}},[e._v("\n                      close\n                    ")])],1)]}}],null,!0)},[e._v(" "),a("span",[e._v("Delete user")])])],1)],1),e._v(" "),s+1<e.users.length?a("v-divider",{key:s}):e._e()]})],2)],1),e._v(" "),a("div",{staticClass:"addBtnCont"},[a("v-btn",{staticClass:"addBtn",attrs:{color:"primary",text:"",outlined:""},on:{click:function(t){e.userDialog=!0}}},[e._v("\n        Add user\n      ")])],1)],1),e._v(" "),a("h2",[e._v("User roles")]),e._v(" "),a("div",{staticClass:"roleTable"},[a("v-data-table",{staticClass:"elevation-1 roleTable",attrs:{headers:e.headers,items:e.userRoles,loading:e.loading,"hide-default-footer":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),e._v(" "),a("td",{staticClass:"text-right"},[a("v-checkbox",{on:{change:function(a){return e.roleChange(a,t.item.id,"ADD_NEW_JOB")}},model:{value:t.item.ADD_NEW_JOB,callback:function(a){e.$set(t.item,"ADD_NEW_JOB",a)},expression:"props.item.ADD_NEW_JOB"}})],1),e._v(" "),a("td",[a("v-checkbox",{on:{change:function(a){return e.roleChange(a,t.item.id,"MANAGE_USERS")}},model:{value:t.item.MANAGE_USERS,callback:function(a){e.$set(t.item,"MANAGE_USERS",a)},expression:"props.item.MANAGE_USERS"}})],1),e._v(" "),a("td",{staticClass:"text-right"},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on;return[a("v-btn",e._g({staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){return e.deleteRole(t.item.id)}}},n),[a("v-icon",{attrs:{color:"error"}},[e._v("\n                  close\n                ")])],1)]}}],null,!0)},[e._v(" "),a("span",[e._v("Delete role")])])],1)]}}])}),e._v(" "),a("div",{staticClass:"addBtnCont"},[a("v-btn",{staticClass:"addBtn",attrs:{color:"primary",text:"",outlined:""},on:{click:function(t){e.roleDialog=!0}}},[e._v("\n        Add role\n      ")])],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.roleDialog,callback:function(t){e.roleDialog=t},expression:"roleDialog"}},[a("v-card",[a("v-card-title",[a("h2",[e._v("Add new user role")])]),e._v(" "),a("v-card-text",[a("v-text-field",{attrs:{label:"Role name"},model:{value:e.newRoleName,callback:function(t){e.newRoleName=t},expression:"newRoleName"}})],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){t.stopPropagation(),e.roleDialog=!1}}},[e._v("\n          Cancel\n        ")]),e._v(" "),a("v-btn",{attrs:{color:"primary",text:"",disabled:this.newRoleName=""},on:{click:function(t){return t.stopPropagation(),e.addRole(t)}}},[e._v("\n          Add\n        ")])],1),e._v(" "),e.addingRole?a("div",{staticClass:"loadingOver"},[a("v-progress-circular",{staticClass:"progress",attrs:{size:"50",width:3,indeterminate:"",color:"primary"}})],1):e._e()],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",[a("v-card-title",[a("h2",[e._v("Edit user")])]),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-text-field",{attrs:{label:"Username",counter:10,required:""},model:{value:e.newUsername,callback:function(t){e.newUsername=t},expression:"newUsername"}}),e._v(" "),a("v-text-field",{attrs:{label:"E-mail",rules:e.emailRules,required:""},model:{value:e.newEmail,callback:function(t){e.newEmail=t},expression:"newEmail"}}),e._v(" "),a("v-text-field",{attrs:{type:"password",label:"Old password",required:""},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),e._v(" "),a("v-text-field",{attrs:{type:"password",label:"New password",required:""},model:{value:e.newPassword0,callback:function(t){e.newPassword0=t},expression:"newPassword0"}}),e._v(" "),a("v-text-field",{attrs:{type:"password",label:"New password",rules:e.newPasswordRules,required:""},model:{value:e.newPassword1,callback:function(t){e.newPassword1=t},expression:"newPassword1"}}),e._v(" "),a("v-select",{attrs:{label:"User role","item-text":"name","item-value":"id",items:e.userRoles,rules:[function(e){return!!e||"Item is required"}],required:""},model:{value:e.newUserRoleID,callback:function(t){e.newUserRoleID=t},expression:"newUserRoleID"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){t.stopPropagation(),e.editDialog=!1}}},[e._v("\n          Cancel\n        ")]),e._v(" "),a("v-btn",{attrs:{color:"primary",text:"",disabled:"true"},on:{click:function(t){return t.stopPropagation(),e.editUser(t)}}},[e._v("\n          Edit\n        ")])],1),e._v(" "),e.editingUser?a("div",{staticClass:"loadingOver"},[a("v-progress-circular",{staticClass:"progress",attrs:{size:"50",width:3,indeterminate:"",color:"primary"}})],1):e._e()],1)],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.userDialog,callback:function(t){e.userDialog=t},expression:"userDialog"}},[a("v-card",[a("v-card-title",[a("h2",[e._v("Add new user")])]),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.validNewUserForm,callback:function(t){e.validNewUserForm=t},expression:"validNewUserForm"}},[a("v-text-field",{attrs:{label:"Username",counter:10,required:""},model:{value:e.newUsername,callback:function(t){e.newUsername=t},expression:"newUsername"}}),e._v(" "),a("v-text-field",{attrs:{label:"E-mail",rules:e.emailRules,required:""},model:{value:e.newEmail,callback:function(t){e.newEmail=t},expression:"newEmail"}}),e._v(" "),a("v-text-field",{attrs:{type:"password",label:"Password",required:""},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}),e._v(" "),a("v-select",{attrs:{label:"User role","item-text":"name","item-value":"id",items:e.userRoles,rules:[function(e){return!!e||"Item is required"}],required:""},model:{value:e.newUserRoleID,callback:function(t){e.newUserRoleID=t},expression:"newUserRoleID"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){t.stopPropagation(),e.userDialog=!1}}},[e._v("\n          Cancel\n        ")]),e._v(" "),a("v-btn",{attrs:{color:"primary",text:"",disabled:!e.validNewUserForm||""==this.newUsername||""==this.newEmail||""==this.newPassword||""==this.newUserRoleID},on:{click:function(t){return t.stopPropagation(),e.addUser(t)}}},[e._v("\n          Add user\n        ")])],1),e._v(" "),e.addingUser?a("div",{staticClass:"loadingOver"},[a("v-progress-circular",{staticClass:"progress",attrs:{size:"50",width:3,indeterminate:"",color:"primary"}})],1):e._e()],1)],1)],1)},n=[],i={render:s,staticRenderFns:n};t.a=i}});
//# sourceMappingURL=20.5284ad5792b4d2bc6905.js.map